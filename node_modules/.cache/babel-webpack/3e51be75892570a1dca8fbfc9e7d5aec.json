{"ast":null,"code":"import _asyncToGenerator from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _isNativeReflectConstruct from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport _getPrototypeOf from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/VSSProjects/CapacitorCamera/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == typeof h && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator.return && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(typeof e + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\n\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\n\nimport { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport var CameraWeb = /*#__PURE__*/function (_WebPlugin) {\n  function CameraWeb() {\n    _classCallCheck(this, CameraWeb);\n\n    return _callSuper(this, CameraWeb, arguments);\n  }\n\n  _inherits(CameraWeb, _WebPlugin);\n\n  return _createClass(CameraWeb, [{\n    key: \"getPhoto\",\n    value: function () {\n      var _getPhoto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(options) {\n        var _this = this;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                  var actionSheet;\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (options.webUseInput || options.source === CameraSource.Photos) {\n                          _this.fileInputExperience(options, resolve, reject);\n                        } else if (options.source === CameraSource.Prompt) {\n                          actionSheet = document.querySelector('pwa-action-sheet');\n\n                          if (!actionSheet) {\n                            actionSheet = document.createElement('pwa-action-sheet');\n                            document.body.appendChild(actionSheet);\n                          }\n\n                          actionSheet.header = options.promptLabelHeader || 'Photo';\n                          actionSheet.cancelable = false;\n                          actionSheet.options = [{\n                            title: options.promptLabelPhoto || 'From Photos'\n                          }, {\n                            title: options.promptLabelPicture || 'Take Picture'\n                          }];\n                          actionSheet.addEventListener('onSelection', /*#__PURE__*/function () {\n                            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n                              var selection;\n                              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                                while (1) switch (_context.prev = _context.next) {\n                                  case 0:\n                                    selection = e.detail;\n\n                                    if (selection === 0) {\n                                      _this.fileInputExperience(options, resolve, reject);\n                                    } else {\n                                      _this.cameraExperience(options, resolve, reject);\n                                    }\n\n                                  case 2:\n                                  case \"end\":\n                                    return _context.stop();\n                                }\n                              }, _callee);\n                            }));\n\n                            return function (_x4) {\n                              return _ref2.apply(this, arguments);\n                            };\n                          }());\n                        } else {\n                          _this.cameraExperience(options, resolve, reject);\n                        }\n\n                      case 1:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x2, _x3) {\n                  return _ref.apply(this, arguments);\n                };\n              }()));\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n\n      function getPhoto(_x) {\n        return _getPhoto.apply(this, arguments);\n      }\n\n      return getPhoto;\n    }()\n  }, {\n    key: \"pickImages\",\n    value: function () {\n      var _pickImages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_options) {\n        var _this2 = this;\n\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              return _context5.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(resolve, reject) {\n                  return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                    while (1) switch (_context4.prev = _context4.next) {\n                      case 0:\n                        _this2.multipleFileInputExperience(resolve, reject);\n\n                      case 1:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }, _callee4);\n                }));\n\n                return function (_x6, _x7) {\n                  return _ref3.apply(this, arguments);\n                };\n              }()));\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n\n      function pickImages(_x5) {\n        return _pickImages.apply(this, arguments);\n      }\n\n      return pickImages;\n    }()\n  }, {\n    key: \"cameraExperience\",\n    value: function () {\n      var _cameraExperience = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(options, resolve, reject) {\n        var _this3 = this;\n\n        var cameraModal;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              if (!customElements.get('pwa-camera-modal')) {\n                _context7.next = 16;\n                break;\n              }\n\n              cameraModal = document.createElement('pwa-camera-modal');\n              cameraModal.facingMode = options.direction === CameraDirection.Front ? 'user' : 'environment';\n              document.body.appendChild(cameraModal);\n              _context7.prev = 4;\n              _context7.next = 7;\n              return cameraModal.componentOnReady();\n\n            case 7:\n              cameraModal.addEventListener('onPhoto', /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(e) {\n                  var photo;\n                  return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                    while (1) switch (_context6.prev = _context6.next) {\n                      case 0:\n                        photo = e.detail;\n\n                        if (!(photo === null)) {\n                          _context6.next = 5;\n                          break;\n                        }\n\n                        reject(new CapacitorException('User cancelled photos app'));\n                        _context6.next = 14;\n                        break;\n\n                      case 5:\n                        if (!(photo instanceof Error)) {\n                          _context6.next = 9;\n                          break;\n                        }\n\n                        reject(photo);\n                        _context6.next = 14;\n                        break;\n\n                      case 9:\n                        _context6.t0 = resolve;\n                        _context6.next = 12;\n                        return _this3._getCameraPhoto(photo, options);\n\n                      case 12:\n                        _context6.t1 = _context6.sent;\n                        (0, _context6.t0)(_context6.t1);\n\n                      case 14:\n                        cameraModal.dismiss();\n                        document.body.removeChild(cameraModal);\n\n                      case 16:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }, _callee6);\n                }));\n\n                return function (_x11) {\n                  return _ref4.apply(this, arguments);\n                };\n              }());\n              cameraModal.present();\n              _context7.next = 14;\n              break;\n\n            case 11:\n              _context7.prev = 11;\n              _context7.t0 = _context7[\"catch\"](4);\n              this.fileInputExperience(options, resolve, reject);\n\n            case 14:\n              _context7.next = 18;\n              break;\n\n            case 16:\n              console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements.\");\n              this.fileInputExperience(options, resolve, reject);\n\n            case 18:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this, [[4, 11]]);\n      }));\n\n      function cameraExperience(_x8, _x9, _x10) {\n        return _cameraExperience.apply(this, arguments);\n      }\n\n      return cameraExperience;\n    }()\n  }, {\n    key: \"fileInputExperience\",\n    value: function fileInputExperience(options, resolve, reject) {\n      var input = document.querySelector('#_capacitor-camera-input');\n\n      var cleanup = function cleanup() {\n        var _a;\n\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input';\n        input.type = 'file';\n        input.hidden = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var file = input.files[0];\n          var format = 'jpeg';\n\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n\n          if (options.resultType === 'dataUrl' || options.resultType === 'base64') {\n            var reader = new FileReader();\n            reader.addEventListener('load', function () {\n              if (options.resultType === 'dataUrl') {\n                resolve({\n                  dataUrl: reader.result,\n                  format: format\n                });\n              } else if (options.resultType === 'base64') {\n                var b64 = reader.result.split(',')[1];\n                resolve({\n                  base64String: b64,\n                  format: format\n                });\n              }\n\n              cleanup();\n            });\n            reader.readAsDataURL(file);\n          } else {\n            resolve({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n            cleanup();\n          }\n        });\n        input.addEventListener('cancel', function (_e) {\n          reject(new CapacitorException('User cancelled photos app'));\n          cleanup();\n        });\n      }\n\n      input.accept = 'image/*';\n      input.capture = true;\n\n      if (options.source === CameraSource.Photos || options.source === CameraSource.Prompt) {\n        input.removeAttribute('capture');\n      } else if (options.direction === CameraDirection.Front) {\n        input.capture = 'user';\n      } else if (options.direction === CameraDirection.Rear) {\n        input.capture = 'environment';\n      }\n\n      input.click();\n    }\n  }, {\n    key: \"multipleFileInputExperience\",\n    value: function multipleFileInputExperience(resolve, reject) {\n      var input = document.querySelector('#_capacitor-camera-input-multiple');\n\n      var cleanup = function cleanup() {\n        var _a;\n\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input-multiple';\n        input.type = 'file';\n        input.hidden = true;\n        input.multiple = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var photos = []; // eslint-disable-next-line @typescript-eslint/prefer-for-of\n\n          for (var i = 0; i < input.files.length; i++) {\n            var file = input.files[i];\n            var format = 'jpeg';\n\n            if (file.type === 'image/png') {\n              format = 'png';\n            } else if (file.type === 'image/gif') {\n              format = 'gif';\n            }\n\n            photos.push({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n          }\n\n          resolve({\n            photos: photos\n          });\n          cleanup();\n        });\n        input.addEventListener('cancel', function (_e) {\n          reject(new CapacitorException('User cancelled photos app'));\n          cleanup();\n        });\n      }\n\n      input.accept = 'image/*';\n      input.click();\n    }\n  }, {\n    key: \"_getCameraPhoto\",\n    value: function _getCameraPhoto(photo, options) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var format = photo.type.split('/')[1];\n\n        if (options.resultType === 'uri') {\n          resolve({\n            webPath: URL.createObjectURL(photo),\n            format: format,\n            saved: false\n          });\n        } else {\n          reader.readAsDataURL(photo);\n\n          reader.onloadend = function () {\n            var r = reader.result;\n\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: r,\n                format: format,\n                saved: false\n              });\n            } else {\n              resolve({\n                base64String: r.split(',')[1],\n                format: format,\n                saved: false\n              });\n            }\n          };\n\n          reader.onerror = function (e) {\n            reject(e);\n          };\n        }\n      });\n    }\n  }, {\n    key: \"checkPermissions\",\n    value: function () {\n      var _checkPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var permission;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              if (!(typeof navigator === 'undefined' || !navigator.permissions)) {\n                _context8.next = 2;\n                break;\n              }\n\n              throw this.unavailable('Permissions API not available in this browser');\n\n            case 2:\n              _context8.prev = 2;\n              _context8.next = 5;\n              return window.navigator.permissions.query({\n                name: 'camera'\n              });\n\n            case 5:\n              permission = _context8.sent;\n              return _context8.abrupt(\"return\", {\n                camera: permission.state,\n                photos: 'granted'\n              });\n\n            case 9:\n              _context8.prev = 9;\n              _context8.t0 = _context8[\"catch\"](2);\n              throw this.unavailable('Camera permissions are not available in this browser');\n\n            case 12:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this, [[2, 9]]);\n      }));\n\n      function checkPermissions() {\n        return _checkPermissions.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              throw this.unimplemented('Not implemented on web.');\n\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n\n      function requestPermissions() {\n        return _requestPermissions.apply(this, arguments);\n      }\n\n      return requestPermissions;\n    }()\n  }, {\n    key: \"pickLimitedLibraryPhotos\",\n    value: function () {\n      var _pickLimitedLibraryPhotos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              throw this.unavailable('Not implemented on web.');\n\n            case 1:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n\n      function pickLimitedLibraryPhotos() {\n        return _pickLimitedLibraryPhotos.apply(this, arguments);\n      }\n\n      return pickLimitedLibraryPhotos;\n    }()\n  }, {\n    key: \"getLimitedLibraryPhotos\",\n    value: function () {\n      var _getLimitedLibraryPhotos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              throw this.unavailable('Not implemented on web.');\n\n            case 1:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n\n      function getLimitedLibraryPhotos() {\n        return _getLimitedLibraryPhotos.apply(this, arguments);\n      }\n\n      return getLimitedLibraryPhotos;\n    }()\n  }]);\n}(WebPlugin);\nvar Camera = new CameraWeb();\nexport { Camera }; //# sourceMappingURL=web.js.map","map":{"version":3,"sources":["C:/VSSProjects/CapacitorCamera/node_modules/@capacitor/camera/dist/esm/web.js"],"names":["WebPlugin","CapacitorException","CameraSource","CameraDirection","CameraWeb","options","Promise","resolve","reject","webUseInput","source","Photos","fileInputExperience","Prompt","actionSheet","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","title","promptLabelPhoto","promptLabelPicture","addEventListener","e","selection","detail","cameraExperience","getPhoto","_options","multipleFileInputExperience","pickImages","customElements","get","cameraModal","facingMode","direction","Front","componentOnReady","photo","Error","_getCameraPhoto","dismiss","removeChild","present","console","error","input","cleanup","_a","parentNode","id","type","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","Rear","click","multiple","photos","i","length","push","saved","onloadend","r","onerror","navigator","permissions","unavailable","window","query","name","permission","camera","state","checkPermissions","unimplemented","requestPermissions","pickLimitedLibraryPhotos","getLimitedLibraryPhotos","Camera"],"mappings":"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","sourcesContent":["import { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport class CameraWeb extends WebPlugin {\n    async getPhoto(options) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            if (options.webUseInput || options.source === CameraSource.Photos) {\n                this.fileInputExperience(options, resolve, reject);\n            }\n            else if (options.source === CameraSource.Prompt) {\n                let actionSheet = document.querySelector('pwa-action-sheet');\n                if (!actionSheet) {\n                    actionSheet = document.createElement('pwa-action-sheet');\n                    document.body.appendChild(actionSheet);\n                }\n                actionSheet.header = options.promptLabelHeader || 'Photo';\n                actionSheet.cancelable = false;\n                actionSheet.options = [\n                    { title: options.promptLabelPhoto || 'From Photos' },\n                    { title: options.promptLabelPicture || 'Take Picture' },\n                ];\n                actionSheet.addEventListener('onSelection', async (e) => {\n                    const selection = e.detail;\n                    if (selection === 0) {\n                        this.fileInputExperience(options, resolve, reject);\n                    }\n                    else {\n                        this.cameraExperience(options, resolve, reject);\n                    }\n                });\n            }\n            else {\n                this.cameraExperience(options, resolve, reject);\n            }\n        });\n    }\n    async pickImages(_options) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            this.multipleFileInputExperience(resolve, reject);\n        });\n    }\n    async cameraExperience(options, resolve, reject) {\n        if (customElements.get('pwa-camera-modal')) {\n            const cameraModal = document.createElement('pwa-camera-modal');\n            cameraModal.facingMode =\n                options.direction === CameraDirection.Front ? 'user' : 'environment';\n            document.body.appendChild(cameraModal);\n            try {\n                await cameraModal.componentOnReady();\n                cameraModal.addEventListener('onPhoto', async (e) => {\n                    const photo = e.detail;\n                    if (photo === null) {\n                        reject(new CapacitorException('User cancelled photos app'));\n                    }\n                    else if (photo instanceof Error) {\n                        reject(photo);\n                    }\n                    else {\n                        resolve(await this._getCameraPhoto(photo, options));\n                    }\n                    cameraModal.dismiss();\n                    document.body.removeChild(cameraModal);\n                });\n                cameraModal.present();\n            }\n            catch (e) {\n                this.fileInputExperience(options, resolve, reject);\n            }\n        }\n        else {\n            console.error(`Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements.`);\n            this.fileInputExperience(options, resolve, reject);\n        }\n    }\n    fileInputExperience(options, resolve, reject) {\n        let input = document.querySelector('#_capacitor-camera-input');\n        const cleanup = () => {\n            var _a;\n            (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n        };\n        if (!input) {\n            input = document.createElement('input');\n            input.id = '_capacitor-camera-input';\n            input.type = 'file';\n            input.hidden = true;\n            document.body.appendChild(input);\n            input.addEventListener('change', (_e) => {\n                const file = input.files[0];\n                let format = 'jpeg';\n                if (file.type === 'image/png') {\n                    format = 'png';\n                }\n                else if (file.type === 'image/gif') {\n                    format = 'gif';\n                }\n                if (options.resultType === 'dataUrl' ||\n                    options.resultType === 'base64') {\n                    const reader = new FileReader();\n                    reader.addEventListener('load', () => {\n                        if (options.resultType === 'dataUrl') {\n                            resolve({\n                                dataUrl: reader.result,\n                                format,\n                            });\n                        }\n                        else if (options.resultType === 'base64') {\n                            const b64 = reader.result.split(',')[1];\n                            resolve({\n                                base64String: b64,\n                                format,\n                            });\n                        }\n                        cleanup();\n                    });\n                    reader.readAsDataURL(file);\n                }\n                else {\n                    resolve({\n                        webPath: URL.createObjectURL(file),\n                        format: format,\n                    });\n                    cleanup();\n                }\n            });\n            input.addEventListener('cancel', (_e) => {\n                reject(new CapacitorException('User cancelled photos app'));\n                cleanup();\n            });\n        }\n        input.accept = 'image/*';\n        input.capture = true;\n        if (options.source === CameraSource.Photos ||\n            options.source === CameraSource.Prompt) {\n            input.removeAttribute('capture');\n        }\n        else if (options.direction === CameraDirection.Front) {\n            input.capture = 'user';\n        }\n        else if (options.direction === CameraDirection.Rear) {\n            input.capture = 'environment';\n        }\n        input.click();\n    }\n    multipleFileInputExperience(resolve, reject) {\n        let input = document.querySelector('#_capacitor-camera-input-multiple');\n        const cleanup = () => {\n            var _a;\n            (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n        };\n        if (!input) {\n            input = document.createElement('input');\n            input.id = '_capacitor-camera-input-multiple';\n            input.type = 'file';\n            input.hidden = true;\n            input.multiple = true;\n            document.body.appendChild(input);\n            input.addEventListener('change', (_e) => {\n                const photos = [];\n                // eslint-disable-next-line @typescript-eslint/prefer-for-of\n                for (let i = 0; i < input.files.length; i++) {\n                    const file = input.files[i];\n                    let format = 'jpeg';\n                    if (file.type === 'image/png') {\n                        format = 'png';\n                    }\n                    else if (file.type === 'image/gif') {\n                        format = 'gif';\n                    }\n                    photos.push({\n                        webPath: URL.createObjectURL(file),\n                        format: format,\n                    });\n                }\n                resolve({ photos });\n                cleanup();\n            });\n            input.addEventListener('cancel', (_e) => {\n                reject(new CapacitorException('User cancelled photos app'));\n                cleanup();\n            });\n        }\n        input.accept = 'image/*';\n        input.click();\n    }\n    _getCameraPhoto(photo, options) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            const format = photo.type.split('/')[1];\n            if (options.resultType === 'uri') {\n                resolve({\n                    webPath: URL.createObjectURL(photo),\n                    format: format,\n                    saved: false,\n                });\n            }\n            else {\n                reader.readAsDataURL(photo);\n                reader.onloadend = () => {\n                    const r = reader.result;\n                    if (options.resultType === 'dataUrl') {\n                        resolve({\n                            dataUrl: r,\n                            format: format,\n                            saved: false,\n                        });\n                    }\n                    else {\n                        resolve({\n                            base64String: r.split(',')[1],\n                            format: format,\n                            saved: false,\n                        });\n                    }\n                };\n                reader.onerror = e => {\n                    reject(e);\n                };\n            }\n        });\n    }\n    async checkPermissions() {\n        if (typeof navigator === 'undefined' || !navigator.permissions) {\n            throw this.unavailable('Permissions API not available in this browser');\n        }\n        try {\n            // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n            // the specific permissions that are supported varies among browsers that implement the\n            // permissions API, so we need a try/catch in case 'camera' is invalid\n            const permission = await window.navigator.permissions.query({\n                name: 'camera',\n            });\n            return {\n                camera: permission.state,\n                photos: 'granted',\n            };\n        }\n        catch (_a) {\n            throw this.unavailable('Camera permissions are not available in this browser');\n        }\n    }\n    async requestPermissions() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async pickLimitedLibraryPhotos() {\n        throw this.unavailable('Not implemented on web.');\n    }\n    async getLimitedLibraryPhotos() {\n        throw this.unavailable('Not implemented on web.');\n    }\n}\nconst Camera = new CameraWeb();\nexport { Camera };\n//# sourceMappingURL=web.js.map"]},"metadata":{},"sourceType":"module"}